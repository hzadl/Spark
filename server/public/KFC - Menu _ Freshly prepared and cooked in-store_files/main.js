function setCookie(n,t,i){var r=new Date,u;r.setDate(r.getDate()+i);u=escape(t)+";path=/"+(i==null?"":"; expires="+r.toUTCString());document.cookie=n+"="+u}function getCookie(n){var t=document.cookie,i=t.indexOf(" "+n+"="),r;return i==-1&&(i=t.indexOf(n+"=")),i==-1?t=null:(i=t.indexOf("=",i)+1,r=t.indexOf(";",i),r==-1&&(r=t.length),t=unescape(t.substring(i,r))),t}function HideBucket(n){n=="True"&&($(".bucket-is-active").parents("li").hide().next().hide(),$(".js-product-item-add").hide())}function getstorescallbk(n){$("#renderStoreNearby").html("");loadstores(n,kfc.map)}function getnextstorescallbk(n){loadstores(n,kfc.map)}function loadstores(n,t){for(var f,o,r,s,e,u,h=new google.maps.LatLngBounds,i=0;i<n.Stores.length;i++)kfc.data.storeFinder.mapData["id_"+n.Stores[i].Store.StoreId]=n.Stores[i],kfc.data.storeFinder.mapData["id_"+n.Stores[i].Store.StoreId].GooglemapAddress="//maps.google.com/maps?t=m&q=loc:"+n.Stores[i].Store.Latitude+"+"+n.Stores[i].Store.Longitude,i==0&&n.Start==0?($("#renderStoreNearest").html(kfc.method.storeFinder.template.storeDetail(n.Stores[i],"nearest")),f=new google.maps.LatLng(n.Stores[i].Store.Latitude,n.Stores[i].Store.Longitude),o=n.Stores[0].GooglemapAddress,kfc.data.storeFinder.map||(kfc.data.storeFinder.map={}),kfc.data.storeFinder.map.marker||(kfc.data.storeFinder.map.marker=[]),r=$(".closest-store-yourkfc"),r.hasClass("hidden")||(f=new google.maps.LatLng(r.attr("datalat"),r.attr("datalon")),o="//maps.google.com/maps?t=m&q=loc:"+r.attr("datalat")+"+"+r.attr("datalon"),kfc.data.storeFinder.mapData[r.attr("data")]={GooglemapAddress:n.Stores[i].GooglemapAddress,Store:{Latitude:r.attr("datalat"),Longitude:r.attr("datalon")}}),s={url:"/images/marker.png",anchor:new google.maps.Point(108,129)},kfc.data.storeFinder.map.marker[i]=new google.maps.Marker({position:f,map:t,icon:s,title:"Get directions"}),google.maps.event.addListener(kfc.data.storeFinder.map.marker[0],"click",function(){window.open(o,"_blank")}),t.setCenter(f)):$("#renderStoreNearby").append(kfc.method.storeFinder.template.storeDetail(n.Stores[i],"nearby"));kfc.method.storeFinder.CollapseStoresTradinghours();$(".closest-store-yourkfc").hasClass("hidden")?(e=$(".closest-store").find(".find-a-store-other-days"),e.slideDown(500),$(".closest-store").find("accordion-store-detail").addClass("js-active")):(e=$(".closest-store-yourkfc").find(".find-a-store-other-days"),e.slideDown(500),$(".closest-store-yourkfc").find("accordion-store-detail").addClass("js-active"));u=$(".closest-store-show-more");n.ShowMore?($(u).show(),$(u).data("start",n.Start+n.Stores.length),$(u).data("size",6),$(u).data("search-lat",n.Latitude),$(u).data("search-long",n.Longitude)):$(u).hide();$(".pnl-store-finder-map").removeClass("pnl-store-finder-map-loading");$(".btn-store-closest").on("click",function(n){var i=$(".closest-store-yourkfc"),u;$(".accordion-store-detail.js-active").each(function(){var n=$(this);n.removeClass("js-active");n.find(".store-operation-hour").height(n.find(".js-find-a-store-day-header").height())});var f=$(this).closest(".accordion-store-detail").attr("data").replace("id_",""),r=$(this).closest(".store"),e=$(r).find(".action-store-distance").html(),o=$(r).find(".action-store-name").html(),s=$(r).find(".action-store-phone").html(),h=$(r).find(".store-details").html(),c=$(r).find(".action-store-address").html(),l=$(r).find(".action-store-address").data("location-lat"),a=$(r).find(".action-store-address").data("location-long"),v=$(r).find(".find-a-store-day").html(),y=$(r).find(".find-a-store-other-days").html(),p=$(r).find(".store-operation-hour").attr("data");i.attr("data",r.attr("data"));i.find(".action-store-distance").html(e);i.find(".action-store-name").html(o);i.find(".action-store-phone").html(s);i.find(".action-store-address").html(c);i.find(".store-details").html(h);i.find(".find-a-store-day").html(v);i.find(".find-a-store-other-days").html(y);i.find(".store-operation-hour").attr("data",p);i.find(".store-operation-hour").removeClass("hidden l-hidden hide-for-small hide-for-large");$(".closest-store-opening-hours-message").hide();$(this).closest(".store").find(".find-a-store-other-days").slideUp(500);$(".closest-store-yourkfc").find(".find-a-store-other-days").css("display","block");$(".closest-store-yourkfc").addClass("js-active");$(".closest-store-item").find(".find-a-store-other-days").slideUp(500);i.hasClass("hidden")&&(i.removeClass("hidden l-hidden hide-for-small hide-for-large"),$(".store-finder-accordion").height(parseInt($(".store-finder-accordion").height())+parseInt(i.height())));i.find(".store-operation-hour").height(i.find(".store-details").height());i.find("> h5 .action-store-name").trigger("click");u=new google.maps.LatLng(l,a);kfc.data.storeFinder.map.marker[0].setPosition(u);t.setCenter(u);kfc.method.storeFinder.set.closest(f);$("html, body").animate({scrollTop:100},"slow");n.preventDefault()})}function AddGoogleAnalytics(n,t,i,r,u){typeof n=="undefined"&&(n="");typeof u=="undefined"||u===""?_gaq.push(["_trackEvent",n+" text: "+t+" url: "+i," location: "+r]):_gaq.push(["_trackEvent",n,u,i])}function GetQueryStringParams(n){for(var i,u=window.location.search.substring(1),r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1]}function PlaceholderFormSubmit(n){for(var i,t=0;t<n.elements.length;t++)i=n.elements[t],HandlePlaceholderItemSubmit(i)}function HandlePlaceholderItemSubmit(n){if(n.name){var t=n.getAttribute("placeholder");t&&t.length>0&&n.value===t&&(n.value="",window.setTimeout(function(){n.value=t},100))}}function ReplaceWithText(n){var t,i,r,u;if(!_placeholderSupport){for(t=document.createElement("input"),t.type="text",t.id=n.id,t.name=n.name,t.className=n.className,i=0;i<n.attributes.length;i++)r=n.attributes.item(i).nodeName,u=n.attributes.item(i).nodeValue,r!=="type"&&r!=="name"&&t.setAttribute(r,u);t.originalTextbox=n;n.parentNode.replaceChild(t,n);HandlePlaceholder(t);_placeholderSupport||(n.onblur=function(){this.dummyTextbox&&this.value.length===0&&this.parentNode.replaceChild(this.dummyTextbox,this)})}}function HandlePlaceholder(n){if(_placeholderSupport)Debug("browser has native support for placeholder");else{var t=n.getAttribute("placeholder");t&&t.length>0?(Debug("Placeholder found for input box '"+n.name+"': "+t),n.value=t,n.setAttribute("old_color",n.style.color),n.style.color="#c0c0c0",n.onfocus=function(){var n=this;this.originalTextbox&&(n=this.originalTextbox,n.dummyTextbox=this,this.parentNode.replaceChild(this.originalTextbox,this),n.focus());Debug("input box '"+n.name+"' focus");n.style.color=n.getAttribute("old_color");n.value===t&&(n.value="")},n.onblur=function(){var n=this;Debug("input box '"+n.name+"' blur");n.value===""&&(n.style.color="#c0c0c0",n.value=t)}):Debug("input box '"+n.name+"' does not have placeholder attribute")}}function Debug(n){if(typeof _debug!="undefined"&&_debug){var t=document.getElementById("Console");t||(t=document.createElement("div"),t.id="Console",document.body.appendChild(t));t.innerHTML+=n+"<br />"}}function Catringformupdate(n,t){$(".js-catering-pickup-storeid").val(t)}function Contactformupdate(n,t){$(".contact-form-store-name").val(n);$(".contact-form-store-code").val(t)}function BannerApp(){var t=navigator.userAgent||navigator.vendor||window.opera,n="";console.log(n);t.match(/iPad/i)||t.match(/iPhone/i)||t.match(/iPod/i)?n="ios":t.match(/Android/i)&&(n="android");console.log(n+" "+t);n.length>0&&$(".banner-app").removeClass("hide");$(".col-banner-app-col-second a").click(function(t){t.preventDefault();var i=n=="android"?"https://play.google.com/store/apps/details?id=com.kfcaus.ordering&hl=en":"https://itunes.apple.com/au/app/kfc-xpress/id725748250?mt=8";window.open(i,"_self")});$(".banner-app-close").click(function(n){n.preventDefault();$(".banner-app").addClass("hide")})}var app={},kfc,_debug,_placeholderSupport;app.geolocation=function(){function i(i){clearTimeout(t);i.code==1;n(null)}function r(r){n=r;Modernizr.geolocation?(t=setTimeout(u,5e3),navigator.geolocation.getCurrentPosition(f,i,{maximumAge:6e4,timeout:3e3,enableHighAccuracy:!0})):n(null)}function u(){n(null)}function f(i){clearTimeout(t);i?n(i):n(null)}var n,t;return{GetCurrentPosition:r}}(),function(n){window.XDomainRequest&&n.ajaxTransport(function(t){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var i;return{send:function(r,u){function f(t,r,f,e){i.onload=i.onerror=i.ontimeout=i.onprogress=n.noop;i=undefined;u(t,r,f,e)}i=new XDomainRequest;i.open(t.type,t.url);i.onload=function(){f(200,"OK",{text:i.responseText},"Content-Type: "+i.contentType)};i.onerror=function(){f(404,"Not Found")};i.onprogress=function(){};t.xdrTimeout&&(i.ontimeout=function(){f(0,"timeout")},i.timeout=t.xdrTimeout);i.send(t.hasContent&&t.data||null)},abort:function(){i&&(i.onerror=n.noop(),i.abort())}}}})}(jQuery);$(".js-product-deal").click(function(n){$('[class*="product-deal-icon-"]').removeClass("isActive");$(".product-results").html($(this).html());$(this).addClass("isActive");$(".compare-nutritional-details").attr("href","/nutrition?id="+$(this).data("productoptionnodeid"));$(".js-product-item-add").data("productoptionid",$(this).data("productoptionnodeid"));var t=$(this).data("product-image");$(".js-product-image").attr("src",t);n.preventDefault()});$(".js-crisisMessage").click(function(){setCookie("IsViewedCrisisMessage","true",1)});$(".js-locationAlert").click(function(){setCookie("landing_alert_message","true",1)});$(".js-cateringAlert").click(function(){setCookie("catering_alert_message","true",1)});$(".js-bucketAlert").click(function(){var n=$(".js-bucket-icon").html();setCookie("bucket_alert_message","true",1)});$(".js-mobileBanner").click(function(){return setCookie("mobile_banner","true",1),$(this).parents(".mobile-banner").fadeOut(),!1});$(document).ready(function(){var n=$("#search-nearest-store");n.size()>0&&kfc.method.storeFinder.init(n)});kfc={data:{},method:{storeFinder:{}}};kfc.data.userLocation={};kfc.data.storeFinder={};kfc.data.storeFinder.map=[];kfc.data.storeFinder.mapData={};kfc.method.storeFinder.get={};kfc.method.storeFinder.map={};kfc.method.storeFinder.write={};kfc.method.storeFinder.template={};kfc.method.storeFinder.reset={};kfc.method.storeFinder.set={};kfc.method.storeFinder.get.closestStores={};kfc.map={};kfc.method.storeFinder.CollapseStoresTradinghours={};kfc.method.storeFinder.CollapseStoresTradinghours=function(){$(".find-a-store-other-days").each(function(){var n=$(this),t=$(n.closest(".accordion-store-detail"));n.slideUp(500);t.removeClass("js-active")})};kfc.method.storeFinder.setLongLat=function(n){var e=n.parent(),f=e.find(".auto-suggest"),o=new google.maps.Geocoder,r,i,u,t;n.attr("lng","");n.attr("lat","");r=n.val();r.length>0&&(i={region:"AU",components:"country:AU",sensor:!1,address:r},u=function(n){var i,t;for(f.html(""),i=5,n.results.length<i&&(i=n.results.length),t=0;t<i;t++)f.append('<div class="option" lat="'+n.results[t].geometry.location.lat+'" lng="'+n.results[t].geometry.location.lng+'">'+n.results[t].formatted_address.replace(", Australia","")+"<\/div>")},$.browser.msie&&window.XDomainRequest?(t=new XDomainRequest,t.open("get","//maps.googleapis.com/maps/api/geocode/json?address="+i.address+"&components="+i.components+"&region="+i.region+"&sensor="+i.sensor),t.onload=function(){var n=$.parseJSON(t.responseText);(n==null||typeof n=="undefined")&&(n=$.parseJSON(n.firstChild.textContent));u(n)},t.onprogress=function(){},t.ontimeout=function(){},t.onerror=function(){},setTimeout(function(){t.send()},0)):$.ajax({type:"GET",url:"//maps.googleapis.com/maps/api/geocode/json",dataType:"json",data:i,success:u}))};kfc.method.storeFinder.setMyStore=function(n){$.cookie("storeID",n,{expires:7})};kfc.method.storeFinder.init=function(n){function s(n){n?(u={Latitude:n.coords.latitude,Longitude:n.coords.longitude},kfc.data.userLocation=u):u=null;kfc.map=t;kfc.method.storeFinder.get.storeDetail(u,t)}var e=new google.maps.LatLng(0,0),o={zoom:18,center:e,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!1,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(document.getElementById("storeFinderMap"),o),r=n.parent(),f=r.find(".auto-suggest"),u="",i,h;app.geolocation.GetCurrentPosition(s);r.on("click",".option",function(){var t=$(this);n.attr("lng",t.attr("lng"));n.attr("lat",t.attr("lat"));n.val(t.html());f.html("")});$(".js-find-a-store-day-header").live("click",function(){var r=$(this),u=$(this).closest(".store").find(".find-a-store-other-days"),n=r.closest(".accordion-store-detail"),i;n.hasClass("js-active")||(kfc.method.storeFinder.CollapseStoresTradinghours(),$(u).slideDown(500),n.addClass("js-active"),i=new google.maps.LatLng(kfc.data.storeFinder.mapData[n.attr("data")].Store.Latitude,kfc.data.storeFinder.mapData[n.attr("data")].Store.Longitude),kfc.data.storeFinder.map.marker[0].setPosition(i),google.maps.event.clearListeners(kfc.data.storeFinder.map.marker[0],"click"),google.maps.event.addListener(kfc.data.storeFinder.map.marker[0],"click",function(){window.open(kfc.data.storeFinder.mapData[n.attr("data")].GooglemapAddress,"_blank")}),t.setCenter(i))});$("#btnStoreFinderSearch").on("click",function(n){var u=$("#search-nearest-store").val(),r,e,i;AddGoogleAnalytics("find a store search ",u,"",window.location.pathname);u.length>0&&(r={region:"AU",components:"country:AU",sensor:!1,address:u},e=function(n){f.html("");kfc.map=t;kfc.method.storeFinder.get.storeDetail({Latitude:n.results[0].geometry.location.lat,Longitude:n.results[0].geometry.location.lng},t)},$.browser.msie&&window.XDomainRequest?(i=new XDomainRequest,i.open("get","//maps.googleapis.com/maps/api/geocode/json?address="+r.address+"&components="+r.components+"&region="+r.region+"&sensor="+r.sensor),i.onload=function(){var n=$.parseJSON(i.responseText);(n==null||typeof n=="undefined")&&(n=$.parseJSON(n.firstChild.textContent));e(n)},i.onprogress=function(){},i.ontimeout=function(){},i.onerror=function(){},setTimeout(function(){i.send()},0)):$.ajax({type:"GET",url:"//maps.googleapis.com/maps/api/geocode/json",dataType:"json",data:r,success:e}));n.preventDefault()});n.on("keypress",function(n){var i=$(this),t=r.find(".auto-suggest"),f=t.find(".js-active"),u=n.keyCode?n.keyCode:n.which;if(u==13)return t.html().length<1?$("#btnStoreFinderSearch").trigger("click"):t.find(".js-active").size()>0?(i.val(t.find(".js-active").html()),t.html("")):t.html(""),!1});n.on("keyup",function(n){var e=$(this),t=r.find(".auto-suggest"),i=t.find(".js-active"),f=n.keyCode?n.keyCode:n.which,u;if(f!=13){if(f==40)return i.size()<1||t.find("> div").size()-1==i.index()?(t.find("> div").removeClass("js-active"),t.find("> div").eq(0).addClass("js-active")):(u=i.index()+1,t.find("> div").removeClass("js-active"),t.find("> div").eq(u).addClass("js-active")),!1;if(f==38)return n.preventDefault(),i.size()<1||0==i.index()?t.find("> div").removeClass("js-active"):(u=i.index()-1,t.find("> div").removeClass("js-active"),t.find("> div").eq(u).addClass("js-active")),!1;kfc.method.storeFinder.setLongLat(e)}});i=$(".closest-store-show-more");h=$(".store-finder-accordion");i.bind("click",function(n){var t={Latitude:$(i).data("search-lat"),Longitude:$(i).data("search-long")},r={Coordinates:t,UserCoordinates:kfc.data.userLocation,start:$(i).data("start"),size:6};kfc.method.storeFinder.get.closestStores(r,getnextstorescallbk);n.preventDefault()})};kfc.method.storeFinder.set.closest=function(n){setCookie("ClosestStoreId",n,30)};kfc.method.storeFinder.set.active=function(){kfc.method.storeFinder.map.clearOverlays()};kfc.method.storeFinder.map.clearOverlays=function(){if(!!kfc.data.storeFinder.map.marker){for(var n=0;n<kfc.data.storeFinder.map.marker.length;n++)kfc.data.storeFinder.map.marker[n].setMap(null);kfc.data.storeFinder.map.marker=[]}};kfc.method.storeFinder.get.closestStores=function(n,t){$.ajax({type:"POST",cache:!1,url:"/Umbraco/Api/StoreApi/PostLocationGetClosestStores",beforeSend:function(n){n&&n.overrideMimeType&&n.overrideMimeType("application/j-son;charset=UTF-8")},dataType:"json",data:n,crossDomain:!0,success:function(n){t(n)},error:function(){}})};kfc.method.storeFinder.get.storeDetail=function(n){kfc.data.storeFinder.map=[];kfc.method.storeFinder.map.clearOverlays();$.support.cors=!0;$(".pnl-store-finder-map").addClass("pnl-store-finder-map-loading");var t={Coordinates:n,UserCoordinates:kfc.data.userLocation,size:3};kfc.method.storeFinder.get.closestStores(t,getstorescallbk)};kfc.method.storeFinder.reset.view=function(){$("#renderStoreNearby").find(".store-operation-hour").each(function(){var n=$(this),t=n.find("tr");n.height(t.eq(0).height())})};kfc.method.storeFinder.template.storeDetail=function(n,t){var i,r,u;return t||(t="nearby"),i=$("#templateStoreDetail").html(),i=i.replace("{{storeName}}",n.Store.Name),n.Store.AddressLine2!=""&&(n.Store.AddressLine1+="<br/> "+n.Store.AddressLine2),r=n.Store.AddressLine1+" "+n.Store.City+" "+n.Store.State+" "+n.Store.PostCode,i=i.replace("{{storeAddress}}",r),u=n.Store.Phone,i=i.replace("{{phone}}",u),i=i.replace("{{linkGetDirection}}","//maps.google.com.au/maps?daddr="+encodeURIComponent(r.replace(/ /g,"+"))),i=i.replace("{{storeDistance}}",n.Store.DistanceFormatted),i=i.replace("{{storeId}}","id_"+n.Store.StoreId),i=i.replace("{{data-storeid}}",n.Store.StoreId),i=i.replace(/{{cordLat}}/g,n.Store.Latitude),i=i.replace(/{{cordLng}}/g,n.Store.Longitude),i=i.replace("{{markerURL}}",document.URL.replace("/find-a-store/","")+"/images/marker.png"),i=t=="nearby"?i.replace("{{OpenState}}",""):i.replace("{{OpenState}}",""),i=i.replace("{{StoreIsClosed}}",n.Store.IsClosed),i=i.replace("{{BoolStoreIsClosed}}",n.Store.IsClosed),i=i.replace("{{StoreIsClosedMessage}}",n.Store.StoreClosedMessage),jQuery.each(n.Store.TradingHours,function(n,t){n==0&&t.IsClosed==!1?(i=i.replace("{{headerDay"+n+"}}","Open today"),i=i.replace("{{operationHour"+n+"}}",t.FormattedTradingHours)):n==0&&t.IsClosed==!0?(i=i.replace("{{headerDay"+n+"}}","Closed today"),i=i.replace("{{operationHour"+n+"}}","")):(i=i.replace("{{headerDay"+n+"}}",t.DayOfWeekName),i=i.replace("{{operationHour"+n+"}}",t.FormattedTradingHours))}),i};app.findastore=function(){function n(){}return{GetMoreStores:n}}();$(".nav-menu").delegate(".js-product-item-more-link","click",function(n){$(this).addClass("loading-icon");$(this).removeClass("js-product-item-more-link");var i=$(this).parent(),t=$(this).closest(".js-category-products"),r={CategoryId:t.data("categoryid"),Region:t.data("region"),Start:3};$.ajax({type:"POST",cache:!0,url:"/Umbraco/surface/ProductSurface/PostCategoryGetCategoryMenuViewModel",data:r,success:function(n){t.append(n);$(i).remove(".product-item-more-content");$(".js-product-item-more-link").removeClass("loading-icon")}});n.preventDefault()});app.location=function(){function n(n){return{Latitude:n.coords.latitude,Longitude:n.coords.longitude}}function t(n,t){$.ajax({type:"POST",url:"/Umbraco/Api/StoreApi/PostLocationGetClosestStore",dataType:"json",data:n,success:function(n){t(n)}})}function i(n,t,i){var r={Coordinates:t,StoreId:n};$.ajax({type:"POST",url:"/Umbraco/Api/StoreApi/PostLocationGetStore",dataType:"json",data:r,success:function(n){i(n)}})}function r(i){function r(r){r?t(n(r),function(n){i(n)}):t(null,function(n){i(n)})}app.geolocation.GetCurrentPosition(r)}function u(t,r){function u(u){u?i(t,n(u),function(n){r(n)}):i(t,null,function(n){r(n)})}app.geolocation.GetCurrentPosition(u)}return{GetSelectedStore:u,GetClosestStore:r}}();app.queryMenuItem=function(){function n(){for(var t=[],n,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<r.length;i++)n=r[i].split("="),t.push(n[0]),t[n[0]]=n[1];return t}function t(){var t=n().menu,i=n().menu;(t!==undefined||i!==undefined)&&(t=t.replace("-"," "),i=i.replace("-",""),setCookie("FilterMenuPosition",i,1),setCookie("FilterMenuName",t,1))}return{init:t}}();app.queryMenuItem.init();app.contactusmodule=function(){function r(){var t={enquiryType:$(".contact-form-enquirytype"),enquiryTypeDropDown:$(".contact-form-selection"),enquiryTypeDropDownTwo:$(".contact-form-complaint-selected"),enquiryTypeContent:$(".content-form-enquiry-content"),enquiryTypeYourComment:$(".contact-form-your-comment-content"),enquiryTypeMediaDetails:$(".contact-form-media-content"),enquiryTypeMediaFormFields:$(".contact-form-media-enquiry-fields"),enquiryTypeAllFormResponse:$(".contact-form-response"),enquiryTypeFranchiseFormFields:$(".contact-form-franchise-enquiry-fields"),enquiryTypeMoreDetails:$(".contact-form-moreDetails"),enquiryTypeMoreDetailsBtn:$(".contact-form-moreDetailsBtn"),enquiryTypeaddSomeMoreDetails:$(".contact-form-addSomeMoreDetails"),enquiryTypeSpecificStoreBtn:$(".contact-form-specific-storeBtn"),enquiryTypeSpecificStore:$(".contact-form-specific-store"),enquiryTypeSpecificProductBtn:$(".contact-form-specific-productBtn"),enquiryTypeSpecificProduct:$(".contact-form-specific-product"),enquiryContentMedia:$(".contact-form-media"),enquiryContentComplaintSelected:$("[class*=contact-form-complaint-selected-]"),enquiryContentAllComplaintSelected:$("[class*=contact-form-complaint-selected]"),enquiryContentComplimentSelected:$(".contact-form-compliment-selected")};n=t;n.enquiryTypeMoreDetailsBtn.on("click",function(t){n.enquiryTypeMoreDetails.fadeIn(500).removeClass("hidden");n.enquiryTypeAllFormResponse.addClass("hidden").fadeOut(500);t.preventDefault()});n.enquiryTypeSpecificStoreBtn.on("click",function(t){n.enquiryTypeSpecificStore.fadeIn(500).removeClass("hidden");n.enquiryTypeSpecificStoreBtn.addClass("hidden").fadeOut(500);t.preventDefault()});n.enquiryTypeSpecificProductBtn.on("click",function(t){n.enquiryTypeSpecificProduct.fadeIn(500).removeClass("hidden");n.enquiryTypeSpecificProductBtn.addClass("hidden").fadeOut(500);t.preventDefault()})}function c(){$("#contact-form-placeholder").html("");$(".content-form-enquiry-content").empty();$(".contact-form-mediaBtn").addClass("hidden");$(".contact-form-media-content").addClass("hidden");$(".content-form-enquiry-content").removeClass("hidden");var t=n.enquiryTypeDropDown.val(),r=n.enquiryType.find("option:selected").text();switch(t){case"general-enquiry":i(t,r);break;case"suggestion":i(t,r);break;case"complaint":i(t,r);break;case"compliment":i(t,r);break;case"product-enquiry":i(t,r);s();break;case"employment-enquiry":i(t,r);break;case"franchise-enquiry":a(t);break;case"media-enquiry":v(t);$(".content-form-enquiry-content").html("I am from the press/media and I want to ask a question.");$(".contact-form-mediaBtn").removeClass("hidden")}}function a(){$.ajax({type:"POST",url:"/umbraco/surface/EnquirySurface/GetFranchiseEnqiuryForm/",cache:!0,success:function(n){$("#contact-form-placeholder").html(n);$(".contact-form-your-comment-content").html("Are you interested in franchise opportunities with KFC? Let us know what you're looking for.");r()},error:function(){}})}function v(){$.ajax({type:"POST",url:"/umbraco/surface/EnquirySurface/MediaEnqiuryForm/",cache:!0,success:function(n){$("#contact-form-placeholder").html(n);$(".contact-form-your-comment-content").empty();r();y()},error:function(){}})}function y(){$(".contact-form-mediaBtn").on("click",p)}function p(){$(".contact-form-media-content").fadeIn(500).removeClass("hidden");$(".contact-form-mediaBtn").addClass("hidden").fadeOut(500);$(".content-form-enquiry-content").addClass("hidden").fadeOut(500);e.preventDefault()}function i(n,t){$.ajax({type:"POST",url:"/umbraco/surface/EnquirySurface/GeneralEnquiryForm1/",cache:!0,success:function(i){$("#contact-form-placeholder").html(i);$(".contact-form-enquirytype").val(n);$(".contact-form-enquirytypetext").val(t);n==="general-enquiry"&&($(".contact-form-addSomeMoreDetails").addClass("hidden"),$(".contact-form-your-comment-content").html("Let us know the details of your enquiry."));n==="employment-enquiry"?($(".contact-form-addSomeMoreDetails .contact-form-moreDetails-header").html('<span class="content-header-red">Is this about<\/span><br> a specific store?'),$(".contact-form-moreDetails-content").html("If this relates to a specific store, we'd like to know which one."),$(".contact-form-specific-productBtn").addClass("hidden"),$(".contact-form-specific-store .row:nth-child(3)").addClass("hidden")):$(".contact-form-addSomeMoreDetails").removeClass("hidden");app.storelookup.init(Contactformupdate,!1);$.ajax({type:"GET",url:"/Umbraco/Api/ProductApi/GetAllProductCategoriesName",success:function(n){$(".contact-form-menu-product-item").empty();$(".contact-form-menu-product-option").empty();$(".contact-form-menu-item").append('<option data-id=-1 value="">Select<\/option>');$(n).each(function(n,t){$(".contact-form-menu-item").append('<option data-id="'+t.Id+' " value="'+t.Name+' ">'+t.Name+"<\/option>")});$(".contact-form-menu-item").change()}}).done(function(){});$(".contact-form-menu-item").on("change",function(){var n=$(this).find("option:selected").data("id");$.ajax({type:"GET",url:"/Umbraco/Api/ProductApi/GetCategoryProducts",data:{categoryId:n},success:function(n){$(".contact-form-menu-product-item").empty();$(".contact-form-menu-product-option").empty();$(n).each(function(n,t){$(".contact-form-menu-product-item").append('<option data-id="'+t.Id+' " value="'+t.Name+' ">'+t.Name+"<\/option>")});$(".contact-form-menu-product-item").change()}}).done(function(){})});$(".contact-form-menu-product-item").on("change",function(){var n=Number($(this).find("option:selected").data("id"));n>0&&$.ajax({type:"GET",url:"/Umbraco/Api/ProductApi/GetProductOptions",data:{productId:n},success:function(n){if($(".contact-form-menu-product-option").empty(),n.length<=1){$(".contact-form-menu-product-option").hide();return}$(".contact-form-menu-product-option").show();$(n).each(function(n,t){$(".contact-form-menu-product-option").append('<option value="'+t.Name+' ">'+t.Name+"<\/option>")})}}).done(function(){})});r();switch(n){case"general-enquiry":u(n);s();h();o();$(".contact-form-content-header").html('<span class="content-header-red">Your<\/span><br /> enquiry');break;case"suggestion":u(n);$(".contact-form-content-header").html('<span class="content-header-red">Your<\/span><br /> suggestion');$(".contact-form-your-comment-content").html("Got an idea? Tell us about it here.");$(".contact-form-details-content").empty();break;case"complaint":w();s();h();$(".contact-form-content-header").html('<span class="content-header-red">Your<\/span><br /> complaint');$(".contact-form-your-comment-content").html("We're sorry something went wrong. Please tell us about it.");$(".contact-form-details-content").html("Add your details so we can lodge this complaint");break;case"compliment":u(n);h();$(".contact-form-content-header").html('<span class="content-header-red">Your<\/span><br /> compliment');$(".contact-form-your-comment-content").html("Thanks for being so nice! We love getting positive encouragement from our customers.");$(".contact-form-moreDetails-content").empty();break;case"product-enquiry":u(n);o();$(".contact-form-content-header").html('<span class="content-header-red">Your<\/span><br /> enquiry');$(".contact-form-your-comment-content").empty();break;case"employment-enquiry":u(n);o();$(".contact-form-content-header").html('<span class="content-header-red">Your<\/span><br /> enquiry');$(".contact-form-your-comment-content").empty()}},error:function(){}})}function o(){n.enquiryTypeMoreDetails.removeClass("hidden");n.enquiryTypeAllFormResponse.addClass("hidden")}function s(){n.enquiryTypeaddSomeMoreDetails.removeClass("hidden");n.enquiryTypeSpecificStoreBtn.addClass("hidden")}function h(){n.enquiryTypeSpecificStoreBtn.removeClass("hidden")}function w(){n.enquiryTypeDropDownTwo.removeClass("hidden");n.enquiryTypeDropDownTwo.on("change",f)}function u(n){$(".leveltwo.contact-form-"+n+"-selected").removeClass("hidden");$(".leveltwo.contact-form-"+n+"-selected").on("change",f);$(".leveltwo.contact-form-"+n+"-selected").on("change",b)}function f(t){var r,i;typeof t!="undefined"?(r=$(t.currentTarget).val(),i=$(t.currentTarget).find("option:selected").text()):(r=n.enquiryTypeDropDownTwo.val(),i=n.enquiryTypeDropDownTwo.find("option:selected").text());i==="Public Liability"&&(i="PublicLiability");$(".contact-form-category-one").val(i);d();k(r)}function b(n){var n=$(this).val();switch(n){case"Product":t(n,"compliment");break;case"Staff":t(n,"compliment");break;case"Store":t(n,"compliment");break;case"Job-Application":t(n,"employment-enquiry");break;case"Staff-Concern":t(n,"employment-enquiry");break;case"franchising":t(n,"general-enquiry");break;case"other":t(n,"general-enquiry");break;case"sponsorship":t(n,"general-enquiry");break;case"store-enquiry":t(n,"general-enquiry");break;case"ingredient":t(n,"product-enquiry");break;case"nutritional":t(n,"product-enquiry");break;case"promotion":t(n,"product-enquiry")}}function t(n,t){$(".levelthree").addClass("hidden");$(".contact-form-"+t+"-selected-"+n).removeClass("hidden");$(".contact-form-"+t+"-selected-"+n).on("change",l)}function k(t){var i=t;n.enquiryContentComplaintSelected.addClass("hidden");$(".contact-form-complaint-selected-"+t).removeClass("hidden");$(".contact-form-complaint-selected-"+t).on("change",l)}function l(n){var i,t;typeof n!="undefined"?(i=$(n.currentTarget).val(),t=$(n.currentTarget).find("option:selected").text()):(i=$(this).val(),t=$(this).find("option:selected").text());$(".contact-form-category-two").val(t)}function d(){$("[class*=contact-form-complaint-selected-] option[value='']").attr("selected","true")}function g(n){var t=$(".contact-form-selection").find("option[value="+n+"]").attr("selected","selected");$(".contact-form-selection").val(t.val());c()}r();var n;n.enquiryTypeDropDown.on("change",c);$(".leveltwo.contact-form-compliment-selected").on("change",f());n.enquiryTypeDropDownTwo.on("change",f);return{init:r,SetEnquiryType:g}}();app.contactusmodule.init(),function(){var n,u={settings:{productFilterLink:$(".product-filter dd a"),productFilterLinkLi:$(".product-filter li a"),menuCategory:$(".menu-category"),productFilterMobile:$(".product-filter-mobile"),categoryData:"category"},init:function(){n=this.settings;this.bindUIActions()},bindUIActions:function(){var t=getCookie("FilterMenuPosition"),i=getCookie("FilterMenuName");t&&(n.menuCategory.addClass("hidden").fadeIn("slow"),$(".menu-category-"+t).removeClass("hidden"),$(".active").removeClass("active"),$("."+t).addClass("active"),n.productFilterMobile.html(i+'<i class="icons downarrow-white-icon"><\/i>'),t=="all"&&$(".menu-category").removeClass("hidden"));n.productFilterLink.on("click",function(t){var r=$(this).data(n.categoryData),i;n.menuCategory.addClass("hidden").fadeIn("slow");$(".active").removeClass("active");i=$(this).text();n.productFilterMobile.html(i+'<i class="icons downarrow-white-icon"><\/i>');$(".menu-category-"+r).removeClass("hidden");$(this).addClass("active");setCookie("FilterMenuPosition",r,1);setCookie("FilterMenuName",i,1);$(this).hasClass("product-filter-nav-first")&&n.menuCategory.removeClass("hidden");$("html, body").animate({scrollTop:0},500);t.preventDefault()});n.productFilterLinkLi.on("click",function(t){var r=$(this).text(),i;n.productFilterMobile.html(r+'<i class="icons downarrow-white-icon"><\/i>');i=$(this).data(n.categoryData);n.menuCategory.addClass("hidden").fadeIn("slow");$(".active").removeClass("active");setCookie("FilterMenuPosition",i,1);setCookie("FilterMenuName",r,1);$(".menu-category-"+i).removeClass("hidden");$(this).addClass("active");$(".product-filter dd a."+i).addClass("active");$(this).hasClass("product-filter-nav-first")&&n.menuCategory.removeClass("hidden");$("#drop1").removeClass("open");$("#drop1").css("left","-999999em");$("html, body").animate({scrollTop:0},500);t.preventDefault()})}},i,f={settings:{storeSearchField:$(".store-search")},init:function(){i=this.settings;this.bindStoreSearch()},bindStoreSearch:function(){i.storeSearchField.keypress(function(){storeFinderSearchInput.size()>0})}},t,r;app.Nutritionmodule=function(){function u(){var t={active:"active",productNutritionTable:$(".product-nutrition-table"),productNutritionValue:$(".product-nutrition-value"),productNutritionSelectorsLi:$(".product-nutrition-selectors li"),productNutritionSelectors:$(".product-nutrition-selectors li a"),productNutritionPerServe:$(".product-nutrition-perServe"),productNutritionPer100:$(".product-nutrition-per100"),productNutritionPerAllergens:$(".product-nutrition-allergens"),productNutritionTitle:$(".product-nutrition-title"),productNutritionValueEnergy:$(".product-nutrition-value.energy"),productNutritionRowTotals:$(".product-nutrition-row-totals"),productNutritionLegend:$(".product-nutrition-legend"),productNutritionElements:$(".product-nutrition-elements"),productNutritionInformationIcon:$(".product-nutrition-information-icon"),productNutritionInformationIconContent:$(".product-nutrition-information-icon-content"),productjsNutritionSort:$(".js-nutrition-sort")};e=t;n=t;o()}function o(){r();i("perserve");n.productNutritionTable.removeClass("product-nutrition-allergen-table")}function s(){for(var n,t=9;t<12;t++)n=""+t,$(".product-nutrition-table td:nth-child("+n+")").show(),$(".product-nutrition-table th:nth-child("+n+")").show(),$(".pinned .product-nutrition-table th:nth-child("+n+")").hide(),$(".pinned .product-nutrition-value:nth-child("+n+")").hide();$(".product-nutrition-row-totals").hide()}function r(){for(var n,t=9;t<12;t++)n=""+t,$(".product-nutrition-table td:nth-child("+n+")").hide(),$(".product-nutrition-table th:nth-child("+n+")").hide(),$(".pinned .product-nutrition-table th:nth-child("+n+")").hide(),$(".pinned .product-nutrition-value:nth-child("+n+")").hide();$(".product-nutrition-row-totals").show()}function t(t,i,r,u){var f=0;n.productNutritionRowTotals.fadeIn(300);n.productNutritionRowTotals.show();i.length>0?i.each(function(){r.empty();f+=Number($(this).data(t));var n=f;isNaN(n)?r.html(""):n%1!=0?r.html(n.toFixed(2)+u):r.html(n+u)}):r.html("")}function i(n){t(""+n+"",$(".product-nutrition-value.energy"),$(".product-nutrition-totals.js-energy"),"kJ");t(""+n+"",$(".product-nutrition-value.protein"),$(".product-nutrition-totals.js-protein"),"g");t(""+n+"",$(".product-nutrition-value.fat"),$(".product-nutrition-totals.js-fat"),"g");t(""+n+"",$(".product-nutrition-value.sFat"),$(".product-nutrition-totals.js-sFat"),"g");t(""+n+"",$(".product-nutrition-value.carb"),$(".product-nutrition-totals.js-carb"),"g");t(""+n+"",$(".product-nutrition-value.sugar"),$(".product-nutrition-totals.js-sugar"),"g");t(""+n+"",$(".product-nutrition-value.sodium"),$(".product-nutrition-totals.js-sodium"),"mg")}function f(){$(".product-nutrition-perServe").parent().hasClass("active")&&i("perserve");$(".product-nutrition-per100").parent().hasClass("active")&&i("per100g")}function h(t){$(".js-product-nutrition-row-lookup td").attr("colspan","8");n.productNutritionTable.removeClass("product-nutrition-allergen-table");n.productNutritionRowTotals.removeClass("hidden").fadeIn(300);n.productNutritionValue.each(function(){var n=$(this),t=n.data("perserve"),i=n.data("measure");n.find("span.value").length==1?n.find("span.value").html(t):n.html("<span class='value'>"+t+"<\/span>"+i)});n.productNutritionTitle.each(function(){var n=$(this),t=n.data("perserveheading");n.removeClass("active");n.html(t)});i("perserve");n.productNutritionTitle.removeClass("border-line");n.productNutritionValue.removeClass("border-line");n.productNutritionLegend.addClass("hidden").fadeOut(500);r();n.productjsNutritionSort.removeClass("hidden");t.preventDefault()}function c(t){$(".js-product-nutrition-row-lookup td").attr("colspan","8");n.productNutritionTable.removeClass("product-nutrition-allergen-table");n.productNutritionRowTotals.removeClass("hidden").fadeIn(300);n.productNutritionValue.each(function(){var n=$(this),t=n.data("per100g"),i=n.data("measure");n.find("span.value").length==1?n.find("span.value").html(t):n.html("<span class='value'>"+t+"<\/span>"+i)});n.productNutritionTitle.each(function(){var n=$(this),t=n.data("perserveheading");n.removeClass("active");n.html(t)});i("per100g");n.productNutritionTitle.removeClass("border-line");n.productNutritionValue.removeClass("border-line");n.productNutritionLegend.addClass("hidden").fadeOut(500);r();n.productjsNutritionSort.removeClass("hidden");t.preventDefault()}function l(t){$(".js-product-nutrition-row-lookup td").attr("colspan","12");n.productNutritionTable.addClass("product-nutrition-allergen-table");n.productNutritionRowTotals.addClass("hidden").fadeOut(300);$(".product-nutrition-elements i").addClass("active");n.productNutritionValue.each(function(){var t=$(this),n=t.data("allergen");n=n.replace(/\s/g,"");n=="P"?t.html('<div class="product-nutrition-present-icon">'+n+"<\/div>"):n=="T"?t.html('<div class="product-nutrition-trace-icon">'+n+"<\/div>"):t.html("<div> <\/div>")});n.productNutritionTitle.each(function(){var t=$(this),n=t.data("perserveallergenheader"),i=t.data("allergenlegendcontent");t.addClass("product-nutrition-icons-allergen"+n+" active");t.html(n+'<div class="product-nutrition-information-icon product-nutrition-information-icon'+n+'" data-dropdown="dropdown'+n+'"><\/div>    <div id="dropdown'+n+'" data-dropdown-content class="f-dropdown content product-nutrition-f-dropdown product-nutrition-information-icon-content">'+i+"<\/div>")});n.productNutritionInformationIcon.live("click",function(){$(".product-nutrition-information-icon").removeClass("active");$(".f-dropdown.content").hasClass("open")&&$(this).addClass("active")});$("body").on("click.fndtn.dropdown",function(){$(".product-nutrition-information-icon").removeClass("active")});n.productjsNutritionSort.addClass("hidden");n.productNutritionElements.find(n.productNutritionInformationIcon).remove();n.productNutritionLegend.fadeIn(500).removeClass("hidden");n.productNutritionTitle.addClass("border-line");n.productNutritionValue.addClass("border-line");s();t.preventDefault()}var e,n;u();n.productNutritionSelectors.on("click",function(){var t=$(this).text();t=t.replace(/\s+/g,"-").toLowerCase();n.productNutritionSelectors.parent().removeClass(n.active);$(this).parent().addClass(n.active);t=="allergens"?$(".product-nutrition-find-a-product").addClass("product-nutrition-find-a-product-allergens"):$(".product-nutrition-find-a-product").removeClass("product-nutrition-find-a-product-allergens")});$(".js-nurition-remove").live("click",function(n){var i=$(this).closest("tr").data("id"),t=$(this).closest("tr").data("index");$('*[data-index="'+t+'"]').remove().fadeIn(300);f();n.preventDefault()});n.productNutritionPerServe.on("click",h);n.productNutritionPer100.on("click",c);n.productNutritionPerAllergens.on("click",l);return{init:u,hideAdditionalColumns:r,addTotalsForNutrition:f}}();app.Nutritionmodule.init();u.init();$(".contact-store-search").bind("keydown",function(n){n.keyCode===$.ui.keyCode.TAB&&$(this).data("ui-autocomplete").menu.active&&n.preventDefault()}).autocomplete({source:function(n,t){$.getJSON("/Umbraco/Api/StoreApi/GetStores",{term:extractLast(n.term)},t)},search:function(){var n=extractLast(this.value);if(n.length<2)return!1},focus:function(){return!1},select:function(n,t){var i=split(this.value);return i.pop(),i.push(t.item.value),i.push(""),this.value=i.join(", "),!1}});r={settings:{findIframe:$(".gen-doc").find('iframe[src*="youtube.com"]'),divFlexWrap:'<div class="flex-video" />',findTable:$(".gen-doc").find("table"),findTableAddClass:"generic-table"},init:function(){t=this.settings;this.bindVideoEmbed()},bindVideoEmbed:function(){t.findIframe.wrap(t.divFlexWrap);t.findTable.addClass(t.findTableAddClass);t.findTable.wrap('<div class="table-overflow" />');$(".flex-video").closest(".large-12").length>0&&$(".flex-video").closest(".large-12").find(".flex-video").wrap('<div class="flex-video-large-12" />');t.findIframe.each(function(){var n=$(this).attr("src");n.indexOf("?")>=0?$(this).attr("src",n+"&wmode=transparent"):$(this).attr("src",n+"?wmode=transparent")})}};r.init()}();$("html").hasClass("touch")&&$(".product-filter-mobile").attr("data-options","");$("a").live("click",function(){var n=$(this).data("tracking"),t=$(this).data("tracking-action"),i=$(this).text(),r=$(this).attr("href"),u=window.location.pathname;AddGoogleAnalytics(n,i,r,u,t)});$("body").on("click",function(n){$(".catering-information-icon").removeClass("active");$(".catering-information-icon-content").removeClass("open").removeAttr("style");$(n.target).hasClass("catering-information-icon")&&$(n.target).toggleClass("active")});$(".catering-information-icon").click(function(n){$(n.target).hasClass("active")&&(n.stopPropagation(),$(n.target).removeClass("active"),$(".catering-information-icon-content").removeClass("open").removeAttr("style"))});app.storelookup=function(){function t(t,i,r){n=t;var u="/Umbraco/Api/StoreApi/GetAllStores";i===!0&&(u="/Umbraco/Api/StoreApi/GetAllStoresWithNodeIds");u=r==!0?u+"?isCatering=true":u+"?isCatering=false";$.ajax({url:u,dataType:"json"}).done(function(t){var i=$.map(t,function(n,t){return{value:n,data:t}}),r=$.map(t,function(n){return n});$.mockjax({url:"/autosuggest/service/mock-store-url",responseTime:2e3,response:function(n){if(n!=null&&n.data!=null&&n.data.query!=null){var t=n.data.query,r=t.toLowerCase(),u=new RegExp("\\b"+$.Autocomplete.utils.escapeRegExChars(r),"gi"),f=$.grep(i,function(n){return u.test(n.value)}),e={query:t,suggestions:f};this.responseText=JSON.stringify(e)}}});$("#autocomplete-ajax").autocomplete({serviceUrl:"/autosuggest/service/mock-store-url",lookup:i,lookupFilter:function(t,i,r){n(i);var u=new RegExp("\\b"+$.Autocomplete.utils.escapeRegExChars(r),"gi");return u.test(t.value,t.data)},onSelect:function(t){n(t.value,t.data)}});$("#autocomplete-ajax").keyup(function(){n($(this).val(),"")})})}var n={};return{init:t}}();app.bucket=function(){function u(){$(".content-page-wrap").delegate(".js-product-item-add","click",function(n){var i,r,t;$(this).find(".bucket-red-icon").addClass("added").delay(500).queue(function(n){$(this).removeClass("added");n()});i=$(".js-bucket-icon").parent().css("background-color");$(".js-bucket-icon").parent().filter(":not(:animated)").animate({backgroundColor:"#000"},500,function(){$(this).filter(":not(:animated)").animate({backgroundColor:i},500)});r=$(".js-bucket-icon").parent().css("background-color");$(".top-bar .toggle-topbar.menu-icon a").filter(":not(:animated)").animate({backgroundColor:"#00"},500,function(){$(this).filter(":not(:animated)").animate({backgroundColor:r},500)});t=$(this).data("productoptionid");Number(t)>0&&($(this).data("tracking","Add"+t),app.bucket.AddToBucket(t,s));n.stopImmediatePropagation();n.preventDefault()});$(".js-update-bucket-product-option").on("change",o);$(".js-upsizemeal").on("click",e);$(".js-remove-bucket-item").on("click",function(){var n=$(this).closest(".bucket-item"),t=$(n).data("current-productoptionid");return app.bucket.RemoveFromBucket(t,f),$(n).remove().fadeIn(1e3),!1});$(".js-replaceable-product-item").bind("change",function(){var t=$(this).closest("li"),f=t.data("perserve"),i=$(this).find(":selected").data("perserve"),e=$(this).closest(".js-bucket-item").data("current-productoptioncalorie"),r=Number(e)-Number(f)+Number(i),u=$(this).closest(".js-bucket-item");$(u).data("current-productoptioncalorie",r);$(u).find(".js-bucket-items-nutrition").html(r);n();t.data("perserve",i)})}function f(i){i.IsSuccessfull&&(t(i.Total),n())}function n(){var n=0,t=0,i=0;$(".js-bucket-item").each(function(r,u){n=n+1;t=t+Number($(u).data("current-productoptionprice"));i=i+Number($(u).data("current-productoptioncalorie"))});$(".js-total-bucket-items").html(n);$(".js-total-bucket-items-price").html(t.toFixed(2));$(".js-total-bucket-items-nutrition").html(i)}function e(){var n=$(this).data("current-productoptionid"),t=$(this).data("id"),r=$(this).closest(".bucket-item");i(n,t,r)}function o(){var n=$(this).data("current-productoptionid"),t=$(this).val(),r=$(this).closest(".bucket-item");i(n,t,r)}function i(t,i,r){var u={NewProductOptionId:i,CurrentProductOptionId:t};$.ajax({type:"POST",cache:!1,url:"/umbraco/surface/BucketSurface/PostBucketItem",data:u,success:function(t){r.replaceWith(t);app.bucket.init();n()}})}function s(i){i.IsSuccessfull&&(t(i.Total),n())}function t(n){var t=$.cookie("bucket_interaction");t?$.ajax({url:"/Umbraco/Api/BucketApi/GetBucketCount",dataType:"json",success:function(n){r(n)}}):r(n)}function r(n){n<=0?($(".js-bucket-icon").text(""),$(".js-bucketAlert-l").addClass("hidden"),$(".js-print-buceket-list").removeClass("hidden")):n>=30?($(".js-bucketAlert-l").removeClass("hidden"),$(".js-bucket-icon").text(n),$(".js-print-buceket-list").addClass("hidden")):($(".js-bucketAlert-l").addClass("hidden"),$(".js-bucket-icon").text(n),$(".js-print-buceket-list").removeClass("hidden"))}function h(n,t){var i={productOptionId:n};$.ajax({type:"POST",cache:!1,url:"/Umbraco/Api/BucketApi/PostAddToBucket1",dataType:"json",data:i,success:function(n){$.cookie("bucket_interaction",!0);t(n)}})}function c(n,t){var i={productOptionId:n};$.ajax({type:"POST",cache:!1,url:"/Umbraco/Api/BucketApi/PostRemoveBucket",dataType:"json",data:i,success:function(n){t(n)}})}return $(".js-bucketAlert-l").addClass("hidden"),{init:u,AddToBucket:h,UpdateBucket:t,RemoveFromBucket:c}}();app.bucket.init();app.removeItem=function(){function n(){}return{init:n}}();app.removeItem.init();app.productlookup=function(){function t(){$.ajax({url:"/Umbraco/Api/ProductApi/GetAllProductsName",dataType:"json"}).done(function(t){var i=$.map(t,function(n,t){return{value:n,data:t}}),r=$.map(t,function(n){return n});$.mockjax({url:"/autosuggest/service/mock-product-url",responseTime:2e3,response:function(n){if(n!=null&&n.data!=null&&n.data.query!=null){var t=n.data.query,i=t.toLowerCase(),r=new RegExp("\\b"+$.Autocomplete.utils.escapeRegExChars(i),"gi"),u=$.grep(storesArray,function(n){return r.test(n.value)}),f={query:t,suggestions:u};this.responseText=JSON.stringify(f)}}});$("#autocomplete-product-ajax").autocomplete({appendTo:$("#autocomplete-product-ajax").parent(),serviceUrl:"/autosuggest/service/mock-product-url",lookup:i,lookupFilter:function(n,t,i){var r=new RegExp("\\b"+$.Autocomplete.utils.escapeRegExChars(i),"gi");return r.test(n.value)},onSelect:function(t){AddGoogleAnalytics("Nutrition product search",t.data,t.value,window.location.pathname);n(t.data)}});$("#autocomplete-ajax").keyup(function(){})})}function n(n){var t={ProductOptionId:n};$.ajax({type:"POST",cache:!1,url:"/umbraco/surface/ProductSurface/PostProductItem",data:t,success:function(n){$(".product-nutrition-row-lookup").before(n);$("#autocomplete-product-ajax").val("");app.Nutritionmodule.init();app.Nutritionmodule.hideAdditionalColumns();app.Nutritionmodule.addTotalsForNutrition();$(".product-nutrition-perServe").parent().addClass("active");$(".active",".product-nutrition-selectors").find("a").click();app.responsiveTable.updateData();$(window).width()<1042&&$(".js-product-nutrition-row-lookup td").attr("colspan","12");app.nutritionSort.refresh()}})}return{init:t,AddProductItem:n}}();app.gensubnav=function(){function u(){t.on("click",function(){var u=n.find("li").index($(this).parents("li")),f=$(this).attr("href"),e=$(f).offset().top,r=e-$($(t[0]).attr("href")).offset().top-$(t[0]).height();i.length>0&&(r=r+i.height());topOffset2=$(window).width()<940?r+23:r;u==0&&(r=0);$("body, html").animate({scrollTop:topOffset2},400)});$(".scrolltoSection").on("click",function(){var i=$(this).attr("href"),t=$(i),n;return t==undefined?!1:(n=$(t).offset().top,PositionOffSetY=$(window).width()<940?n-170:n-170,$("html, body").animate({scrollTop:PositionOffSetY},500),!1)});$(window).on("resize",function(){Foundation.libs.magellan.settings.threshold=r.outerHeight()});Foundation.libs.magellan.settings.threshold=r.outerHeight()}var i=$("#main-hero"),r=$("#main-navigation"),n=$(".gen-sub-nav"),t=n.find("a"),f=n.length<=0?0:n.offset().top+n.outerHeight();return{init:u}}();app.gensubnav.init();app.windowResize=function(){function n(){$(window).on("resize",function(){var n=$("#main-navigation").outerHeight();$("#main-navigation").hasClass("fixed")&&($(".alert-box").length>0||$(".mobile-banner").length>0)&&$("body").css({paddingTop:n+4+"px"});$("#main-navigation").hasClass("fixed")||$(".top-bar").height()>0&&($(".top-bar").removeClass("fixed expanded"),$("#main-navigation").addClass("fixed"),$("body").css({paddingTop:n+4+"px"}))})}return{init:n}}();app.windowResize.init();app.windowScroll=function(){function n(){$(window).scroll(function(){var n,t;$(".top-bar.hide-for-print.expanded").height()>0&&(n=$(".top-bar.hide-for-print.expanded").height(),window.scrollY>n&&($(".top-bar.hide-for-print.expanded.fixed").removeClass("expanded fixed"),$(".contain-to-grid").addClass("fixed"),t=$("#main-navigation").outerHeight(),$("body").css({paddingTop:t})))})}return{init:n}}();app.windowScroll.init();_debug=!1;_placeholderSupport=function(){var n=document.createElement("input");return n.type="text",typeof n.placeholder!="undefined"}();window.onload=function(){for(var t,i,r=document.getElementsByTagName("input"),n=0;n<r.length;n++)t=r[n],t.type&&t.type!=""&&t.type!="text"?t.type=="password"&&ReplaceWithText(t):HandlePlaceholder(t);if(!_placeholderSupport)for(n=0;n<document.forms.length;n++)i=document.forms[n],i.attachEvent?i.attachEvent("onsubmit",function(){PlaceholderFormSubmit(i)}):i.addEventListener&&i.addEventListener("submit",function(){PlaceholderFormSubmit(i)},!1)};app.catering=function(){function r(){n=$(".js-cateringitem-quantity");$(n).on("keyup",function(n){var t=Number($(this).val()),f=Number($(this).attr("data-price")),e=$(this).attr("data-nutrition"),r=t*f,u=t*e;!t||t<0?n.which!=9&&$(this).val()!=""&&($(this).val(0),$(this).closest(".js-catering-item-row").find(".js-catering-item-price").html(0),$(this).closest(".js-catering-item-row").find(".js-catering-item-nutrition").html(0),i()):(r%1!=0&&(r=r.toFixed(2)),u%1!=0&&(u=u.toFixed(2)),$(this).closest(".js-catering-item-row").find(".js-catering-item-price").html(r),$(this).closest(".js-catering-item-row").find(".js-catering-item-nutrition").html(u),i())})}function u(n){setTimeout(function(){$(n).parent().find(".js-cateringitem-quantity").trigger("keyup")},30)}function t(n){setTimeout(function(){$(n).parent().find(".js-cateringitem-quantity").trigger("keyup")},30)}function i(){var r=0,i,t;$(n).each(function(n,t){r=Number(r)+Number($(t).val())});$(".js-total-catering-items").html(r);i=0;$(".js-catering-item-price").each(function(n,t){i=Number(i)+Number($(t).text())});i%1!=0&&(i=i.toFixed(2));$(".js-total-catering-items-price").html(i);t=0;$(".js-catering-item-nutrition").each(function(n,i){t=Number(t)+Number($(i).text())});t%1!=0&&(t=t.toFixed(2));$(".js-total-catering-items-nutrition").html(t);$(".js-total-catering-items-nutrition-field").val(t)}var n;$(".js-cateringitem-quantity").after('<div class="inc button catering-qty-button">+<\/div>');$(".js-cateringitem-quantity").before('<div class="dec button catering-qty-button">-<\/div>');$(".button").on("click",function(){var n=$(this),r=n.parent().find(".js-cateringitem-quantity").val(),f=parseInt(n.parent().find("#MinimumAmountForCatering").val()),i;n.hasClass("inc")?(i=parseFloat(r)+1,u($(this)),$(this).parent().find(".dec").removeClass("inActive")):($(this).parent().find(".dec").addClass("inActive"),r>f?(i=parseFloat(r)-1,t($(this)),$(this).parent().find(".dec").removeClass("inActive")):(i=f,t($(this)),$(this).parent().find(".dec").addClass("inActive")));n.parent().find(".js-cateringitem-quantity").val(i)});return{init:r}}();$(document).ready(function(){app.catering.init()});app.cateringSwitch=function(){function c(){function c(){for(var t=[],n,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<r.length;i++)n=r[i].split("="),t.push(n[0]),t[n[0]]=n[1];return t}var l=c().catering;l!==undefined?(n(u),t(i),t(r),n(f),$("html, body").animate({scrollTop:h.offset().top-s.outerHeight()},400)):(n(r),n(i));e.on("click",function(e){n(i);t(u);n(r);t(f);e.preventDefault()});o.on("click",function(e){n(u);t(i);t(r);n(f);e.preventDefault()})}function n(n){n.addClass("hidden")}function t(n){n.removeClass("hidden")}var e=$(".js-start-orderBtn"),i=$(".js-catering-order-form"),o=$(".js-start-cateringBtn"),u=$(".js-toggle-bucket-totals"),r=$(".js-bucket-order-summary"),f=$(".js-catering-order-summary"),s=$("#main-navigation"),h=$("#catering");return{init:c}}();app.nutritionSort=function(){function u(){t=$(".js-nutrition-sort");t.on("change",function(n){var t=$(this).val();i(t,r);n.preventDefault()})}function f(){var n=$(t).val();n!="Sort by"&&i(n,r)}function r(n){var t,i;$(".product-nutrition-table").length<=1?(t=$(".product-nutrition-table").attr("class"),t!=undefined&&(i=[],$(n).each(function(n,r){$(r).parents(".product-nutrition-table").hasClass(t)&&i.push($(r).parent())}),$(".product-nutrition-table").find("tr:not(.js-system-row)").remove(),$(".product-nutrition-table").find(".js-product-nutrition-row-lookup").before(i))):(newresult1=[],newresult2=[],$(n).each(function(n,t){$(t).parents("table").hasClass("responsive")?newresult1.push($(t).parent()):newresult2.push($(t).parent())}),$(".scrollable table").find("tr:not(.js-system-row)").remove(),$(".scrollable").find(".js-product-nutrition-row-lookup").before(newresult1),$(".pinned table").find("tr:not(.js-system-row)").remove(),$(".pinned").find(".js-product-nutrition-row-lookup").before(newresult2))}function i(t,i){n=[];$("."+t).each(function(t,i){n.push(i)});n.sort(e);i(n)}function e(n,t){var i=$(n).find(".value").text(),r=$(t).find(".value").text();return i-r}var n=[],t;return{init:u,sort:i,refresh:f}}();app.nutritionSort.init(),function(n,t,i){function f(t,i){this.element=t;this.settings=n.extend({},u,i);this._defaults=u;this._name=r;this.init()}function e(){var t=n(".cricket-wrapper");t.length&&n("body").addClass("cricket-content")}var r="openkitchens",u={inputSelector:"#open-kitchens-search",submitSelector:"#open-kitchens-submit",storesApiUrl:"//openkitchen.kfc.com.au/api/stores",loadingClass:"pnl-store-finder-map-loading",storeResultsSelector:".store-results",storeResultsClosestSelector:"#renderStoreNearest",storeResultsClosestContainerSelector:".closest-store",storeResultsNearestSelector:"#renderStoreNearby",storeResultsNearestHeaderSelector:".nearest-store .subheader",gooleMapsContainerSelector:".google-maps",gooleMapsId:"map_canvas",storeResultTemplate:'<div class="store accordion-store-detail"><div class="row l-large-push-down-1 {{PADDINGCLASS}}"><div class="small-12 columns"><h5><strong><span class="action-store-name">{{NAME}}<\/span><\/strong> <span class="action-store-distance right">{{DISTANCE}}<\/span><\/h5><p class="action-store-address" data-lat="{{LATITUDE}}" data-lng="{{LONGITUDE}}">{{ADDRESS}} {{CITY}} {{STATE}} {{POSTCODE}}<\/p><p class="action-store-phone">{{PHONE}}<\/p><\/div><\/div><div class="row"><div class="small-6 columns left"><a href="{{EVENTLINK}}" target="_blank" title="Book now" class="booking link event-status available"><span class="booking-button">Book now<\/span><\/a><a href="{{EVENTLINK}}" target="_blank" title="Sold out" class="booking link event-status sold-out"><span class="sold-out-button">Sold out<\/span><\/a><\/div><div class="small-6 columns l-small-push-up-1"><a href="//maps.google.com.au/maps?daddr={{GOOGLEMAPSDIRECTIONQUERYSTRING}}" class="btn-store-link" target="_blank"><strong><span class="right getdirections">Get directions<\/span><\/strong><\/a><\/div><\/div><div class="isStore-closed false"><img class="show-for-small l-small-push-up-1" src="//maps.googleapis.com/maps/api/staticmap?center={{LATITUDE}},{{LONGITUDE}}&amp;markers=icon://kfc.com.au/images/marker-small.png|{{LATITUDE}},{{LONGITUDE}}&amp;zoom=18&amp;size=500x400&amp;sensor=false" title="kfc nsw || Powered by MapsEasy.com" style="border: 1px solid #CECECE;" width="100%" /><\/div><\/div>',storeNoResultTemplate:"<p>Sorry, Open Kitchens are not available near your area.<\/p>",storeResultContainerSelector:".store",storeResultNameSelector:".action-store-name",storeResultLatLngSelector:".action-store-address",storeResultPaddingClass:"second-store",storeResultEventStatusAvailableSelector:".event-status.available",storeResultEventStatusSoldOutSelector:".event-status.sold-out",storeResultsPerPage:3,storeResultsShowMoreSelector:".closest-store-show-more",defaultLat:-33.8732,defaultLng:151.2063};n.extend(f.prototype,{init:function(){var i=this,r=n(i.element).find(i.settings.inputSelector),u=r.parent(),t=u.find(".auto-suggest"),f=n(i.element).find(i.settings.submitSelector),e=n(i.element).find(i.settings.storeResultsShowMoreSelector);r.on("keyup",function(i){var e=n(this),r,u,f;if(e.attr("lat",""),e.attr("lng",""),r=t.find(".js-active"),u=i.keyCode?i.keyCode:i.which,u!=13){if(u==40)return r.size()<1||t.find("> div").size()-1==r.index()?(t.find("> div").removeClass("js-active"),t.find("> div").eq(0).addClass("js-active")):(f=r.index()+1,t.find("> div").removeClass("js-active"),t.find("> div").eq(f).addClass("js-active")),!1;if(u==38)return i.preventDefault(),r.size()<1||0==r.index()?t.find("> div").removeClass("js-active"):(f=r.index()-1,t.find("> div").removeClass("js-active"),t.find("> div").eq(f).addClass("js-active")),!1;kfc.method.storeFinder.setLongLat(e)}return!1});t.on("click",".option",function(){var i=n(this);return r.attr("lng",i.attr("lng")),r.attr("lat",i.attr("lat")),r.val(i.html()),t.html(""),!1});f.on("click",function(){var u=r.attr("lat"),f=r.attr("lng"),e;return u&&u!=""&&f&&f!=""?i.LoadNearestStores(u,f):(e={region:"AU",components:"country:AU",sensor:!1,address:r.val()},n.ajax({type:"GET",url:"//maps.googleapis.com/maps/api/geocode/json",dataType:"json",data:e,success:function(n){n.status=="OK"&&n.results.length>=1&&(u=n.results[0].geometry.location.lat,f=n.results[0].geometry.location.lng,t.html(""),i.LoadNearestStores(u,f))},async:!1})),!1});e.on("click",function(){return i.ShowMore(),!1});i.LoadNearestStores()},LoadNearestStores:function(t,i){var r=this,u;n(this.element).find(this.settings.storeResultsSelector).addClass(this.settings.loadingClass);n(this.element).find(this.settings.gooleMapsContainerSelector).addClass(this.settings.loadingClass);u=this.settings.storesApiUrl;t&&i&&(u=u+"?lat="+t+"&lng="+i);n.ajax({type:"GET",cache:!1,url:u,dataType:"json",crossDomain:!0,success:function(t){r.LoadStoreResults(t);n(r.element).find(r.settings.storeResultsSelector).removeClass(r.settings.loadingClass);n(r.element).find(r.settings.gooleMapsContainerSelector).removeClass(r.settings.loadingClass)},error:function(){}})},LoadStoreResults:function(t){var i=this,r=n(i.settings.storeResultsSelector),u=r.find(i.settings.storeResultsClosestSelector),f=r.find(i.settings.storeResultsNearestSelector),e=r.find(i.settings.storeResultsNearestHeaderSelector),s=n(i.element).find(i.settings.storeResultsShowMoreSelector),o;u.empty();f.empty();t.length===0?(i.LoadGoogleMap(new google.maps.LatLng(i.settings.defaultLat,i.settings.defaultLng)),o=n(i.settings.storeNoResultTemplate),u.append(o)):n.each(t,function(t,r){var o=i.settings.storeResultTemplate.replace(new RegExp("{{ADDRESS}}","g"),r.AddressLine1+" "+r.AddressLine2).replace(new RegExp("{{NAME}}","g"),r.Name).replace(new RegExp("{{CITY}}","g"),r.City).replace(new RegExp("{{STATE}}","g"),r.State).replace(new RegExp("{{POSTCODE}}","g"),r.PostCode).replace(new RegExp("{{PHONE}}","g"),r.Phone).replace(new RegExp("{{GOOGLEMAPSDIRECTIONQUERYSTRING}}","g"),encodeURIComponent(r.AddressLine1+" "+r.AddressLine2+" "+r.City+" "+r.State+" "+r.PostCode)).replace(new RegExp("{{DISTANCE}}","g"),r.DistanceFormatted).replace(new RegExp("{{LATITUDE}}","g"),r.Latitude).replace(new RegExp("{{LONGITUDE}}","g"),r.Longitude).replace(new RegExp("{{EVENTLINK}}","g"),r.EventLink),e;o=t>=i.settings.storeResultsPerPage-1?o.replace(new RegExp("{{PADDINGCLASS}}","g"),i.settings.storeResultPaddingClass):o.replace(new RegExp("{{PADDINGCLASS}}","g"),"");e=n(o);e.find(i.settings.storeResultEventStatusSoldOutSelector).remove();t>=i.settings.storeResultsPerPage?e.hide():i.LoadGoogleMapMarker(e,t===0);t===0?u.append(e):f.append(e)});t.length<=i.settings.storeResultsPerPage&&(s.hide(),t.length<=1?e.hide():e.show())},LoadGoogleMap:function(n){var t=this,r=i.getElementById(t.settings.gooleMapsId),u={scrollwheel:!1,center:n,zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP};t.Map=new google.maps.Map(r,u)},LoadGoogleMapMarker:function(t,i){var r=this,u=t.find(r.settings.storeResultLatLngSelector),o=u.data("lat"),s=u.data("lng"),f=t.find(r.settings.storeResultNameSelector),e=new google.maps.LatLng(o,s);i&&r.LoadGoogleMap(e);var h=r.Map,c=new google.maps.Marker({position:e,title:f.text(),icon:"//kfc.com.au/images/marker-small.png"});c.setMap(h);f.on("click",function(){var i=n(this).parents(r.settings.storeResultContainerSelector),t=i.find(r.settings.storeResultLatLngSelector),u=t.data("lat"),f=t.data("lng"),e=new google.maps.LatLng(u,f),o=r.Map;o.setCenter(e)})},ShowMore:function(){var t=this,i=n(t.settings.storeResultsSelector),f=i.find(t.settings.storeResultsClosestSelector),r=i.find(t.settings.storeResultsNearestSelector),u=r.children(":hidden").slice(0,t.settings.storeResultsPerPage);u.each(function(){var i=n(this);i.show();t.LoadGoogleMapMarker(i,!1)})}});n.fn[r]=function(t){return this.each(function(){n.data(this,"plugin_"+r)||n.data(this,"plugin_"+r,new f(this,t))}),this};typeof google=="object"&&typeof google.maps=="object"&&n(".open-kitchen").openkitchens();n(function(){e()})}(jQuery,window,document);$(function(){BannerApp()})